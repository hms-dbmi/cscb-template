/** Fonts **/

{% if site.layout.body_font %}
{% assign body_font = site.layout.body_font %}
{% else if site.layout.header_font %}
{% assign body_font = site.layout.header_font %}
{% endif %}

body {
  font-family: "{{ body_font }}", "HelveticaNeue-Light", Arial, sans-serif;
  {% if site.layout.body_font_weight %}
  font-weight: {{ site.layout.body_font_weight }};
  {% endif %}
}
{% if site.layout.body_font_bold_weight %}
body b, body strong { font-weight: {{ site.layout.body_font_bold_weight }}; }
{% endif %}

{% if site.layout.header_font and site.layout.header_font != site.layout.body_font %}
h1, h2, h3, h4, h5,
.header, .heading, .title,
nav ul, button, .button { 
  font-family: "{{ site.layout.header_font }}", "HelveticaNeue-Light", Arial, sans-serif;
}
{% endif %}

/* ----- colors (autogenerated from _config.yml)----- */

{% for c in site.colors %}
.border-{{c[0]}} { border-color: {{ c[1] }} !important; }
.text-{{c[0]}}   { color: {{ c[1] }}; }
.text-{{c[0]}} a { color: {{ c[1] }}; }
.bg-{{c[0]}}     { background-color: {{ c[1] }} !important; }
{% endfor %}

/* ----- per-post colors! ----- */
{% for collection in site.collections %}
  {% if collection.color %}
    {% capture pbg %}
      {% if site.colors[collection.color] %}{{ site.colors[collection.color] }}{% else %}{{ collection.color }}{% endif %}
    {% endcapture %}
    nav#pageNav .t-{{collection.label}}:hover,
    nav#pageNav .t-{{collection.label}}.active { border-color: {{ pbg }}; }
  {% else %}
    nav#pageNav .t-{{collection.label}}:hover,
    nav#pageNav .t-{{collection.label}}.active { border-color: {{ site.top_nav_color_default }}; }
  {% endif %}
  {% for node in site[collection.label] %}
    {% capture id %}{{ node.id | remove:'/' | downcase }}{% endcapture %}
    {% capture bg %}{% if site.colors[node.bg] %}{{ site.colors[node.bg] }}{% else %}{{ node.bg }}{% endif %}{% endcapture %}
    {% capture fg %}{% if site.colors[node.color] %}{{ site.colors[node.color] }}{% else %}{{ node.color }}{% endif %}{% endcapture %}
    nav#sectionNav .p-{{id}} { border-color: {{ bg }}; }
    nav#sectionNav .p-{{id}}:before { background-color: {{ bg }}; }
    #{{id}} { background-color: {{ bg }} !important; color: {{ fg }}; }
    #{{id}} a { color: {{ fg }}; }
    {% if node.color == 'white' %}
    #{{id}} a { color: #fff; }
    {% else if node.color == 'black' %}
    #{{id}} a { color: #000; }
    {% endif %}
    {% if node.bg == 'white' %}
    #{{id}} .sectiondivider { color: {{ fg }}; }
    {% else %}
    #{{id}} .sectiondivider { color: {{ bg }}; }
    {% endif %}
    #{{id}} hr { border-color: {{ fg }}; }
  {% endfor %}
{% endfor %}


/** Nav Items **/

{% assign navborder = 3 %}
{% assign navborder_active = 6 %}

{% if site.layout.page_nav_height %}
nav#pageNav {
  height: {{ site.layout.page_nav_height }}px;
}
#main.navbar-hide nav#pageNav {
  top: -{{ site.layout.page_nav_height | divided_by : 1.5 }}px;
}
nav#sectionNav {
  top: {{ site.layout.page_nav_height }}px;
}
nav#pageNav ul li {
  line-height: {{ site.layout.page_nav_height | minus: 9 }}px;
}
{% endif %}

{% if site.layout.page_nav_font_size %}
nav#pageNav {
  font-size: {{ site.layout.page_nav_font_size }}px;
}
{% endif %}

{% if site.layout.section_nav_height %}
nav#sectionNav {
  min-height : {{ site.layout.section_nav_height }}px;
}
nav#sectionNav ul li {
  line-height: {{ site.layout.section_nav_height | minus: 9 }}px;
  height: {{ site.layout.section_nav_height | minus: 6 }}px;
}
{% endif %}

{% if site.layout.section_nav_font_size %}
nav#sectionNav {
  font-size: {{ site.layout.section_nav_font_size }}px;
}
{% endif %}

nav#pageNav ul li,
nav#sectionNav ul li {
  padding: {{navborder}}px;
  padding-bottom: 0;
}

nav#pageNav ul li {
  border-top:{{navborder}}px solid;
}

nav#pageNav ul li:hover, 
nav#pageNav ul li.active {
  border-top-width: {{ navborder_active }}px;
}

nav#sectionNav ul li {
  padding-top: {{navborder_active}}px;
}

nav#sectionNav ul li:before {
  height: {{navborder}}px;
  {% if site.blur_nav_color_bar %}
  top: {{ navborder_active | minus: navborder | divided_by : 2 }}px;
  filter: blur(2px);
  {% endif %}
}

nav#sectionNav ul li:hover:before, 
nav#sectionNav ul li.active:before {
  {% if site.blur_nav_color_bar %}
  height: {{navborder_active | plus : 1}}px;
  top: -1px;
  filter: blur(1px);
  {% else %}
  height: {{navborder_active }}px;
  {% endif %}
}

{% if site.layout.divider_size %}
/** Section Divider Icon Sizes **/

.section {
  padding: {{ site.layout.divider_size | plus: 45 }}px 0 {{ site.layout.divider_size | plus: 80 }}px;
}

.sectiondivider {
    width: {{ site.layout.divider_size | times: 2 | plus: 10 }}px;
    height: {{ site.layout.divider_size | times: 2 | plus: 10 }}px;
    top: -{{ site.layout.divider_size | plus: 5 }}px;
    margin-left: -{{ site.layout.divider_size | plus: 5 }}px;
}

.sectiondivider .fa-stack {
  font-size: {{ site.layout.divider_size }}px;
}

.sectiondivider h5 {
  width: {{ site.layout.divider_size | times: 2 | minus: 20 }}px;
}

{% endif %}